<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>
        <%- title %>
    </title>
</head>

<body
    style=" font-family:serif; background-size: cover; background-image: url(https://img.freepik.com/premium-photo/blurred-colorful-wallpaper-background_976742-179.jpg);">
        <div id="course container" class="flex flex-wrap">
          <% for(var i=0; i < sortedAllCourses.length; i++) { %>
            <div class="mt-10 mb-3 ml-72 w-80 h-54 border shadow-lg border-purple-600 bg-gray-100 border-2 pr-4">
                <p class="ml-5 mt-2 text-3xl">
                    <%= sortedAllCourses[i].courseTitle %>
                </p>
                <div class="flex mt-7">
                    <p class="ml-5 mr-10 text-2xl">
                        <%= sortedAllCourses[i].teacherOfCourseFullName %>
                    </p>
                    <span class="mt-1.5 ml-3"><i class=" ml-20 fa-solid fa-user-graduate"></i></span>
                    <span class="mt-1.5 ml-2">
                        <%= sortedAllCourses[i].enrollmentCount %>
                    </span>
                </div>
                <div class="flex mt-3 ml-10">
                    <div class="">
                        <a href="course/<%= sortedAllCourses[i].id %>">
                            <button
                                class="w-[110px] bg-pink-300 h-[50px] my-3 flex items-center justify-center rounded-xl cursor-pointer relative overflow-hidden transition-all duration-500 ease-in-out shadow-md hover:scale-105 hover:shadow-lg before:absolute before:top-0 before:-left-full before:w-full before:h-full before:bg-gradient-to-r before:from-[#f777f7] before:to-[#9937f0] before:transition-all before:duration-500 before:ease-in-out before:z-[-1] before:rounded-xl hover:before:left-0 text-[#fff]">
                                View Course
                            </button>
                        </a>
                    </div>
                    <% if (currentUser.role==="Student" ) { %>
                        <form
                            action="/enroll/<%= sortedAllCourses[i].id %>?currentUserId=<%= encodeURIComponent(currentUser.id) %>"
                            method="post">
                            <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                            <div class="ml-3">
                                <a href="#">
                                    <button id="myButton" onclick="showAlert()"
                                        class="w-[110px] bg-pink-300 h-[50px] my-3 flex items-center justify-center rounded-xl cursor-pointer relative overflow-hidden transition-all duration-500 ease-in-out shadow-md hover:scale-105 hover:shadow-lg before:absolute before:top-0 before:-left-full before:w-full before:h-full before:bg-gradient-to-r before:from-[#f777f7] before:to-[#9937f0] before:transition-all before:duration-500 before:ease-in-out before:z-[-1] before:rounded-xl hover:before:left-0 text-[#fff]">
                                        Enroll
                                    </button>
                                </a>
                            </div>
                        </form>
                        <% } %>
                </div>
            </div>
            <% } %>
        </div>
        <script>
            function showAlert() {
            // Display an alert when the button is clicked
            alert(`You are enrolled in course succesfully`);
        }  
         </script>
</body>